{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "hcaDssCiCdS3WriteAccess",
      "Effect": "Allow",
      "Action": [
        "s3:AbortMultipartUpload",
        "s3:DeleteBucketPolicy",
        "s3:DeleteBucketWebsite",
        "s3:DeleteObject",
        "s3:DeleteObjectVersion",
        "s3:PutObject",
        "s3:PutObjectAcl",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionAcl",
        "s3:ReplicateDelete",
        "s3:ReplicateObject",
        "s3:RestoreObject"
      ],
      "Resource": [
        "arn:aws:s3:::$DSS_S3_BUCKET",
        "arn:aws:s3:::$DSS_S3_BUCKET/*",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST/*"
      ]
    },
    {
      "Sid": "hcaDssCiCdS3ConfigAccess",
      "Effect": "Allow",
      "Action": [
        "s3:PutAccelerateConfiguration",
        "s3:PutBucket*",
        "s3:PutLifecycleConfiguration",
        "s3:PutReplicationConfiguration"
      ],
      "Resource": [
        "arn:aws:s3:::$DSS_S3_BUCKET",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST",
        "arn:aws:s3:::$DSS_S3_BUCKET_STAGING"
      ]
    },
    {
      "Sid": "hcaDssCiCdS3ReadOnlyAccess",
      "Effect": "Allow",
      "Action": [
        "s3:Get*",
        "s3:List*"
      ],
      "Resource": [
        "arn:aws:s3:::$DSS_S3_BUCKET",
        "arn:aws:s3:::$DSS_S3_BUCKET/*",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST/*",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST_FIXTURES",
        "arn:aws:s3:::$DSS_S3_BUCKET_TEST_FIXTURES/*",
        "arn:aws:s3:::$DSS_S3_BUCKET_STAGING",
        "arn:aws:s3:::$DSS_S3_BUCKET_STAGING/*"
      ]
    },
    {
      "Sid": "hcaDssCiCdLambdaReadAccess",
      "Action": [
        "lambda:ListFunctions",
        "lambda:ListTags",
        "lambda:TagResource",
        "apigateway:*"
      ],
      "Resource": "*",
      "Effect": "Allow"
    },
    {
      "Sid": "hcaDssCiCdIamListRolesAccess",
      "Effect": "Allow",
      "Action": [
        "iam:ListRoles"
      ],
      "Resource": "arn:aws:iam::$account_id:role/"
    },
    {
      "Sid": "hcaDssCiCdTestLogging",
      "Effect": "Allow",
      "Action": [
        "logs:*"
      ],
      "Resource": [
        "arn:aws:logs:*:$account_id:log-group:dss-test-logging*"
      ]
    },
    {
      "Sid": "hcaDssCiCdLambdaElasticsearchSNSAdminAccess",
      "Action": [
        "lambda:*",
        "es:*",
        "sns:*"
      ],
      "Resource": [
        "arn:aws:lambda:*:$account_id:function:dss-*",
        "arn:aws:es:*:$account_id:domain/dss-index-dev",
        "arn:aws:es:*:$account_id:domain/dss-index-dev/*",
        "arn:aws:sns:*:$account_id:dss-*",
        "arn:aws:sns:*:$account_id:domovoi-s3-bucket-events-*"
      ],
      "Effect": "Allow"
    }
  ]
}
